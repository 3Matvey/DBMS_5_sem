# Функциональные требования  
к проекту **«Система электронного голосования»**

## 1. Общая информация
Проект представляет собой систему электронного голосования, позволяющую создавать сессии голосования, регистрировать кандидатов и пользователей, проводить процесс голосования и фиксировать результаты.  
Система предназначена для использования в учебных и организационных целях (например, выборы в студенческий совет, опросы сотрудников, общественные референдумы малого масштаба).  

## 2. Функциональные требования

### 2.1. Авторизация и аутентификация
- Регистрация пользователя по e-mail и паролю.  
- Вход в систему с валидацией данных.  
- Выход из системы.  
- Возможность восстановления пароля.  
- Для участия в голосовании e-mail должен быть подтверждён (если это требуется настройками сессии).

### 2.2. Управление пользователями (CRUD)
- Создание, просмотр, редактирование и удаление пользователей администратором.  
- Возможность блокировки/разблокировки пользователя.  
- Возможность изменения роли и статуса пользователя.  

### 2.3. Система ролей
- Роль **ADMIN**:  
  - управление пользователями;  
  - создание и настройка сессий голосования;  
  - добавление/удаление кандидатов;    
- Роль **USER**:  
  - просмотр активных сессий голосования;  
  - участие в голосовании;  
  - получение уведомлений о статусе сессий.  

### 2.4. Сессии голосования
- Создание новой сессии администратором с указанием:
  - названия, описания;  
  - даты и времени начала/окончания;  
  - режима (анонимное / неанонимное);  
  - типа выбора (одиночный / множественный, с лимитом вариантов).  
- Публикация сессии (доступность для пользователей).  
- Возможность просмотра списка кандидатов пользователями.  

### 2.5. Кандидаты
- Добавление и редактирование кандидатов в рамках конкретной сессии.  
- Хранение основной информации: ФИО, программа/описание, порядок отображения.  

### 2.6. Голосование
- Пользователь может проголосовать за одного или нескольких кандидатов (в рамках ограничений настроек).  
- Проверка уникальности голоса: один пользователь — один голос (или N голосов при мультивыборе).  
- Фиксация времени голосования.  
- Поддержка анонимного режима (с сохранением факта голосования, но без связи с пользователем).  

### 2.7. Результаты голосования
- Автоматический подсчёт голосов по окончании сессии.  
- Сохранение итогового протокола (сумма голосов по каждому кандидату).  
- Хранение метаданных протокола (время формирования, контрольная подпись).  
- Возможность просмотра результатов администратором и пользователями (если сессия публичная).  

### 2.8. Уведомления
- Система уведомляет пользователей о:
  - начале и окончании сессии;  
  - подтверждении голоса;  
  - системных сообщениях (например, блокировка аккаунта).  

### 2.9. Журналирование действий
- Запись в лог следующих событий:
  - успешная и неуспешная авторизация;  
  - создание, редактирование и удаление сущностей (пользователь, сессия, кандидат);  
  - голосование;  
  - изменение статусов и ролей.  
- Хранение доп. данных: пользователь, дата/время, тип действия, сущность, мета-информация (IP, User Agent).  

---

## 3. Нефункциональные требования
- **Целостность данных**: использование ограничений FK, уникальных индексов, валидации данных.  
- **Безопасность**: хэширование паролей, защита от SQL-инъекций, контроль доступа по ролям.  
- **Масштабируемость**: возможность добавления новых ролей, статусов, типов уведомлений.  
- **Надёжность**: аудит логов и невозможность изменения протокола результатов задним числом.  
- **Удобство использования**: интуитивно понятный интерфейс.  

---

## 4. Основные сущности БД
1. Пользователь (User)  
2. Роль (Role)  
3. Статус пользователя (UserStatus)  
4. Сессия голосования (VotingSession)  
5. Настройки сессии (VotingSettings)  
6. Кандидат (Candidate)  
7. Голос (Vote)  
8. Результаты голосования (Result)  
9. Уведомления (Notification)  
10. Журнал действий (AuditLog)  

---

## 5. Минимальные обязательные требования (из условия лабораторной)
- Авторизация/аутентификация пользователя.  
- Управление пользователями (CRUD).  
- Система ролей.  
- Журналирование действий пользователя.  
